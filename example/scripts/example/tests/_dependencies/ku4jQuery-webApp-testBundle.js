(function(c){$=c;$.ku4webApp_testBundle={};$.ku4webAppUT={};function b(){var g=$.ku4webApp_testBundle.app();this._mediator=g.mediator;this._app=g}b.prototype={mediator:function(){return this._mediator},logErrors:function(){this._mediator.logErrors();return this},throwErrors:function(){this._mediator.throwErrors();return this},callback:function(g){$.ku4webApp_testBundle.callback=g;return this},model:function(g){var h=this._app;return $.ku4webApp.models[g](this._mediator,h.serviceFactory,h.storeFactory,h.validatorFactory)},view:function(g){return $.ku4webApp.views[g](this._app)},controller:function(g){return $.ku4webApp.controllers[g](this._app)},template:function(g){return this._app.templateFactory.create(g)}};$.ku4webAppUT.bundle=function(){return new b()};function e(){var k=$.ku4webApp,i=$.mediator(),g=$.ku4webApp_testBundle.serviceFactory(i,k.config.services),j=k.storeFactory(i,k.config.collections),h=k.validatorFactory(k.config.validators);this.serviceFactory=g;this.storeFactory=j;this.validatorFactory=h;this.modelFactory=k.modelFactory(i,g,j,h);this.templateFactory=k.templateFactory(k.config.templates);this.formFactory=k.formFactory(k.config.forms);this.mediator=i}e.prototype={logErrors:function(){this.mediator.logErrors();return this},throwErrors:function(){this.mediator.throwErrors();return this}};$.ku4webApp_testBundle.app=function(){return new e()};function f(i,g,k){var j=$.str.format("$.ku4webApp.{0}",i),h=$.str.format("Requires a valid {0}. {0}= {1}",g,k);if(!$.exists(k)){throw $.ku4exception(j,h)}else{return k}}function a(h,g){this._mediator=h;this._config=g}a.prototype={call:function(j){var h=this._config,k=$.ku4webApp_testBundle.callback||function(l){return l},g=k(j),i=/^__error__$/i.test(g);if(!$.exists(h)){throw $.ku4exception("$.service","Test Bundle services require a valid config containing a 'success':[data] and an 'error':[data] configuration.")}if($.exists(h.error)&&i){this._mediator.notify(g,h.error)}else{if($.exists(h.success)){this._mediator.notify(g,h.success)}}$.ku4webApp_testBundle.callback=function(l){return l};return this}};$.ku4webApp_testBundle.service=function(h,g){return new a(h,g)};function d(h,g){this._mediator=h;this._config=g}d.prototype={create:function(g){return $.ku4webApp_testBundle.service(this._mediator,this._config[g])}};$.ku4webApp_testBundle.serviceFactory=function(h,g){return new d(h,g)}})(jQuery);