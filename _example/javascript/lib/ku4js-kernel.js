var jQuery,ku4jQuery;var ku4js=(ku4jQuery)?jQuery:{};(function(E){E._about_ku4js_={author:"kodmunki\u2122",license:'The MIT License (MIT)\n\nCopyright (c) 2013 kodmunki\u2122.\nPermission is hereby granted, free of charge, to any person obtaining a copy of\nthis software and associated documentation files (the "Software"), to deal in\nthe Software without restriction, including without limitation the rights to\nuse, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of\nthe Software, and to permit persons to whom the Software is furnished to do so,\nsubject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS\nFOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\nCOPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\nIN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\nCONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.'};E.isArray=function(aa){return Array.isArray(aa)};E.isBool=function(aa){return(/boolean/i.test(typeof(aa)))};E.isDate=function(aa){return aa instanceof Date};E.isEvent=function(aa){try{return aa instanceof Event}catch(ab){return aa===window.event}};E.isNumber=function(aa){return((/number/i.test(typeof(aa)))||aa instanceof Number)&&!isNaN(aa)};E.isObject=function(aa){return E.exists(aa)&&(/object/i.test(typeof(aa)))&&!(E.isBool(aa)||E.isNumber(aa)||E.isDate(aa)||E.isArray(aa)||E.isString(aa)||E.isFunction(aa))};E.isObjectLiteral=function(aa){return E.isObject(aa)&&aa.constructor==({}).constructor};E.isFunction=function(aa){return(aa instanceof Function)};E.isString=function(aa){return(/string/i.test(typeof(aa)))||aa instanceof String};E.isZero=function(aa){return aa===0};E.isEven=function(aa){return(E.isNullOrEmpty(aa)||E.isDate(aa))?false:(isNaN(aa)?false:(E.isZero(aa)?false:aa%2===0))};E.isOdd=function(aa){return(E.isNullOrEmpty(aa)||E.isDate(aa))?false:(isNaN(aa)?false:(E.isZero(aa)?false:!E.isEven(aa)))};E.isNull=function(aa){return aa===null};E.isUndefined=function(aa){return typeof(aa)=="undefined"};E.isEmpty=function(aa){return E.exists(aa)&&!E.isFunction(aa)&&E.isZero(aa.length)};E.isNullOrEmpty=function(aa){return !E.exists(aa)||E.isEmpty(aa)};E.exists=function(aa){return(aa!==null)&&(!E.isUndefined(aa))};E.areEqual=function(ab,aa){if(this.exists(ab)&&this.exists(aa)){if(this.exists(ab.equals)&&ab.equals(aa)){return true}if(this.exists(ab.getTime)&&this.exists(aa.getTime)&&ab.getTime()==aa.getTime()){return true}if(ab===aa){return true}else{return ab===aa}}else{return ab===aa}};E.xor=function(ab,aa){return !ab!=!aa};function p(ab,ac,aa,ae){var ad="ku4EXCEPTION @ {0}: {1}\n\nBrowser Stack Trace:\n{2}\n\nku4Trace:\n{3}";return new Error(E.str.format(ad,ab.toUpperCase(),ac,aa,ae))}E.ku4exception=function(ac,ad){var ab=arguments.callee.caller,ae="",aa="";(function(){try{generate.exeception()}catch(ah){aa=(E.exists(ah.stack))?ah.stack.replace(/generate is.+/,""):"[Unavailable]";var ag=0,ai,af;while(ab&&(ag<10)){ai=ab.toString().replace(/[\n\t\r\s]+/g," ").substring(0,100);af=ai.replace(/\W/g,"a").replace(/\s/g,"").replace(/.*base\.js:216/,"").split(/\B/).length>99?ai+"...":ai;ae+=E.str.format("<ku4Idx[{0}]>:{1}\n",ag,af);ab=ab.caller;ag++}}})();return p(ac,ad,aa,ae)};E.ku4Log=function(){try{console.log.apply(console,arguments)}catch(aa){alert(Array.prototype.slice.call(arguments).join("\n"))}};E.replicate=function(ac){var aa=(E.isDate(ac))?new Date(ac):(E.isArray(ac))?[]:(E.isObject(ac))?{}:ac,ab;for(var ad in ac){ab=ac[ad];aa[ad]=((E.isArray(ab))||(E.isObject(ab)))?E.replicate(ab):ab}return aa};if(!E.exists(E.obj)){E.obj={}}E.obj.keys=function(ab){var aa=[];for(var ac in ab){aa[aa.length]=ac}return aa};E.obj.values=function(ab){var aa=[];for(var ac in ab){aa[aa.length]=ab[ac]}return aa};E.obj.count=function(aa){var ab=0;for(n in aa){ab++}return ab};E.obj.hasProp=function(aa,ab){return(E.exists(aa.hasOwnProperty))?aa.hasOwnProperty(ab):false};E.obj.ownProp=function(aa,ab){return(E.obj.hasProp(aa,ab))?aa[ab]:undefined};E.obj.merge=function(ab,aa){var ad=E.replicate(aa);for(var ac in ab){ad[ac]=ab[ac]}return ad};E.obj.meld=function(ac,ab){var aa=E.replicate(ab);for(var ad in ac){if(E.exists(aa[ad])){continue}aa[ad]=ac[ad]}return aa};E.obj.filter=function(){var aa=Array.prototype.slice.call(arguments),ad={},ae=aa[0],ac=aa.slice(1);for(var af in ac){var ab=ac[af];ad[ab]=ae[ab]}return ad};E.obj.areEqual=function(ad,ac){var ab=E.obj.keys(ad),aa=E.obj.keys(ac);if(!(E.exists(ad)&&E.exists(ac))){return false}if(ab.length!=aa.length){return false}for(var ae in ad){if(!E.areEqual(ad[ae],ac[ae])){return false}}return true};if(!E.exists(E.arr)){E.arr={}}E.arr.indexOfRegExp=function(ad,ab){for(var ac in ad){var aa=ad[ac];if(ab.test(ad[ac])){return ac}}return -1};E.arr.parseArguments=function(aa){return Array.prototype.slice.call(aa)};E.Class=function(){};E.Class.prototype={get:function(aa){return this["_"+aa]},set:function(ab,aa){this["_"+ab]=aa;return this},property:function(ab,aa){return(E.isUndefined(aa))?this.get(ab):this.set(ab,aa)}};E.Class.extend=function(ab,aa){if(!ab||!aa){return null}var ac=function(){};ac.prototype=aa.prototype;ab.base=aa;ab.prototype=E.obj.merge(ab.prototype,new ac());ab.prototype.constructor=ab;return ab};if(!E.exists(E.enumeration)){E.enumeration=function(ab){var ad={},aa=ab.length;for(var ac=0;ac<aa;ac++){ad[ab[ac]]=ac}return ad}}if(!E.exists(E.evt)){E.evt={}}E.evt.mute=function(aa){if(!E.exists(aa)){return false}if(E.isFunction(aa.preventDefault())){aa.preventDefault()}if(E.isFunction(aa.stopPropagation())){aa.stopPropagation()}if(E.isFunction(aa.stopImmediatePropagation())){aa.stopImmediatePropagation()}aa.cancelBubble=true;return false};function e(aa){e.base.call(this);this._isLocked=aa||false}e.prototype={isLocked:function(){return this.get("isLocked")},lock:function(){this._isLocked=true;return this},unlock:function(){this._isLocked=false;return this}};E.Class.extend(e,E.Class);E.lock=function(aa){return new e(aa)};if(!E.exists(E.math)){E.math={}}E.math.round=function(ad,ac){var ab=ac||0,aa=Math.pow(10,-ab);return Math.round(parseFloat((ad*aa).toFixed(Math.abs(ab))))/aa};E.math.roundUp=function(ad,ac){var ab=ac||0,aa=5*(Math.pow(10,ab-1));return E.math.round(ad+aa,ac)};E.math.roundDown=function(ad,ac){if(ad===0){return 0}var ab=ac||0,aa=5*(Math.pow(10,ab-1));return E.math.round(ad-aa,ac)};E.math.roundTowardZero=function(ab,aa){return(ab<0)?E.math.roundUp(ab,aa):E.math.roundDown(ab,aa)};E.math.factorial=function(ac){var aa=ac,ab=ac;while(ab--){if(!!ab){aa*=ab}}return aa};E.math.divide=function(ab,aa){var ac=E.isNumber(ab)&&E.isNumber(aa)&&!E.isZero(aa);if(!ac){throw E.ku4exception("$.math",E.str.format("Invalid division. value: {0}/{1} | type: {2}/{3}",ab,aa,typeof ab,typeof aa))}return ab/aa};E.math.gcd=function(ab,aa){return(aa==0)?Math.abs(ab):E.math.gcd(aa,ab%aa)};if(!E.exists(E.str)){E.str={}}var V="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";E.str.isNullOrEmpty=function(aa){return !E.exists(aa)||(E.isString(aa)&&E.isEmpty(aa))};E.str.contains=function(aa,ab){return aa.indexOf(ab)>-1};E.str.build=function(){return"".concat.apply(new String(),arguments)};E.str.format=function(){var ac=arguments,af=ac[0],ab=ac.length,aa,ae;for(var ad=1;ad<ab;ad++){aa=ac[ad];ae=(E.isNull(aa))?"null":(E.isUndefined(aa))?"undefined":aa.toString();af=af.replace(new RegExp("\\{"+(ad-1)+"\\}","g"),ae)}return af};E.str.render=function(ab,ad,ac){var aa=""+ab;for(var ae in ad){aa=aa.replace(new RegExp("\\{{"+ae+"\\}}","g"),ad[ae])}return E.exists(ac)?aa.replace(/\{\{[A-z0-9_]+\}\}/g,ac):aa};E.str.replaceCharsAtIndex=function(ab,aa,ac,ad){if(E.isNullOrEmpty(ab)||aa<0||aa>ab.length||E.isNullOrEmpty(ad)){throw E.ku4exception("Argument Exception","Invalid arguments at $.str.replaceStringAtIndex")}return ab.substring(0,aa)+ad+ab.substring(aa+ac)};E.str.parse=function(){return String.fromCharCode.apply(String,arguments)};E.str.trim=function(aa){return E.str.trimStart(E.str.trimEnd(aa))};E.str.trimStart=function(aa){if(!E.isString(aa)){throw new Error("Cannot trim non-string values")}return(E.exists(aa.replace))?aa.replace(/^[\s\n]*/,""):aa};E.str.trimEnd=function(aa){if(!E.isString(aa)){throw new Error("Cannot trim non-string values")}return(E.exists(aa.replace))?aa.replace(/[\s\n]*$/,""):aa};E.str.encodeBase64=function(ae){if(!E.isString(ae)){throw E.ku4exception("str","Cannot base64 encode non-string value.")}try{return btoa(ae)}catch(ad){var af="",ac=0,am=E.str.encodeUtf8(ae),an,ak,ai,al,aj,ah,ag,aa=function(ao){return am.charCodeAt(ao)},ab=function(ao){return V.charAt(ao)};while(ac<am.length){an=aa(ac++);ak=aa(ac++);ai=aa(ac++);al=an>>2;aj=((an&3)<<4)|(ak>>4);ah=((ak&15)<<2)|(ai>>6);ag=ai&63;if(isNaN(ak)){ah=ag=64}else{if(isNaN(ai)){ag=64}}af+=(ab(al)+ab(aj)+ab(ah)+ab(ag))}return af}};E.str.decodeBase64=function(ae){if(!E.isString(ae)){throw E.ku4exception("str","Cannot base64 encode non-string value.")}try{return atob(ae)}catch(ad){var af="",ac=0,am=ae.replace(/[^A-Za-z0-9\+\/\=]/g,""),an,ak,ai,al,aj,ah,ag,ab=function(ao){return V.indexOf(am.charAt(ao))},aa=function(ao){return String.fromCharCode(ao)};while(ac<am.length){al=ab(ac++);aj=ab(ac++);ah=ab(ac++);ag=ab(ac++);an=(al<<2)|(aj>>4);ak=((aj&15)<<4)|(ah>>2);ai=((ah&3)<<6)|ag;af+=aa(an);if(ah!=64){af+=aa(ak)}if(ag!=64){af+=aa(ai)}}return E.str.decodeUtf8(af)}};E.str.encodeUtf8=function(aa){var af="",ad=aa.replace(/\r\n/g,"\n");function ae(ah){return ad.charCodeAt(ah)}function ac(ah){return String.fromCharCode(ah)}for(var ab=0;ab<ad.length;ab++){var ag=ae(ab);if(ag<128){af+=ac(ag)}else{if((ag>127)&&(ag<2048)){af+=(ac((ag>>6)|192)+ac((ag&63)|128))}else{af+=ac((ag>>12)|224)+ac(((ag>>6)&63)|128)+ac((ag&63)|128)}}}return af};E.str.decodeUtf8=function(ag){var ah="",ae=0,af=0,ad=0,ac=0,ai=ag;function aa(aj){return ai.charCodeAt(aj)}function ab(aj){return String.fromCharCode(aj)}while(ae<ai.length){af=aa(ae);if(af<128){ah+=ab(af);ae++}else{if((af>191)&&(af<224)){ad=aa(ae+1);ah+=ab(((af&31)<<6)|(ad&63));ae+=2}else{ad=aa(ae+1);ac=aa(ae+2);ah+=ab(((af&15)<<12)|((ad&63)<<6)|(ac&63));ae+=3}}}return ah};E.uid=function(){var ab=Math.random().toString().replace(/\b\.\b/,""),aa=Math.random().toString().replace(/\b\.\b/,"");return E.str.encodeBase64(E.str.format("{0}x{1}",ab,aa)).replace(/=+/g,"0").substr(3,32)};function g(aa,ab,ac){g.base.call(this);this._local=aa;this._domain=ab;this._topLevelDomain=ac}g.prototype={local:function(){return this._local},domain:function(){return this._domain},topLevelDomain:function(){return this._topLevelDomain},equals:function(aa){if(!E.exists(aa)){return false}return aa.local()==this._local&&aa.domain().toUpperCase()==this._domain.toUpperCase()&&aa.topLevelDomain().toUpperCase()==this._topLevelDomain.toUpperCase()},toString:function(){return E.str.format("{0}@{1}.{2}",this._local,this._domain,this._topLevelDomain)}};E.Class.extend(g,E.Class);E.emailAddress=function(aa,ab,ac){return new g(aa,ab,ac)};E.emailAddress.Class=g;E.emailAddress.parse=function(ag){if(!(E.exists(ag))&&/@{1}/.test(ag)){return null}var ad=ag.split("@"),aa=ad[1],ac=aa.split("."),ab=ad[0],af=ac.splice(ac.length-1,1),ae=ac.join(".");return new g(ab,ae,af)};function h(aa){h.base.call(this);this._value=aa}h.prototype={value:function(){return this._value},equals:function(aa){if(!E.exists(aa)){return false}return aa.value()==this._value},toStringWithFormat:function(ab){var aa=ab;E.list((this._value.toString().split(""))).each(function(ac){aa=aa.replace("#",ac)});return aa.replace(/#/g,"")}};E.Class.extend(h,E.Class);E.phoneNumber=function(aa){return new h(aa)};E.phoneNumber.Class=h;E.phoneNumber.parse=function(aa){return new h(parseInt(aa.replace(/[^0-9]/gi,"")))};function S(ac,aa,ab){S.base.call(this);this._first=ac||"";this._middle=aa||"";this._last=ab||""}S.prototype={first:function(){return this._first},middle:function(){return this._middle},last:function(){return this._last},full:function(){var aa=(E.isNullOrEmpty(this._middle))?"{F} {L}":"{F} {M} {L}";return E.str.trim(this.toStringWithFormat(aa).replace(/\s{2,}/,""))},initials:function(){var aa=(E.isNullOrEmpty(this._middle))?"{f}.{l}.":"{f}.{m}.{l}.";return this.toStringWithFormat(aa).replace(/\.{2,}/,".")},equals:function(aa){if(!E.exists(aa)){return false}return aa.first()==this._first&&aa.middle()==this._middle&&aa.last()==this._last},toStringWithFormat:function(ac){var aa=this._first.charAt(0),ab=this._middle.charAt(0),ad=this._last.charAt(0);return ac.replace("{F}",this._first).replace("{M}",this._middle).replace("{L}",this._last).replace("{f}",aa).replace("{m}",ab).replace("{l}",ad)}};E.Class.extend(S,E.Class);E.properName=function(ac,aa,ab){return new S(ac,aa,ab)};E.properName.Class=S;function Q(aa){Q.base.call(this);this.$h={};this._count=0;var ab=(E.exists(aa)&&E.exists(aa.toObject))?aa.toObject():aa;for(var ac in ab){this.add(ac,ab[ac])}}Q.prototype={count:function(){return this.get("count")},keys:function(){return E.obj.keys(this.$h)},values:function(){return E.obj.values(this.$h)},add:function(ab,aa){if((!(E.isString(ab)||E.isNumber(ab)))||/(^null$)|(^undefined$)/.test(ab)||this.containsKey(ab)){throw E.ku4exception("$.hash",E.str.format("Invalid key: {0}. Must be unique number or string.",ab))}if(E.isUndefined(aa)){return this}this.$h[ab]=aa;this._count++;return this},clear:function(){var aa=this.$h;for(var ab in aa){delete aa[ab]}this._count=0;return this},find:function(aa){if(!E.exists(aa)){return null}var ab=this.$h[aa];return(E.isUndefined(ab))?null:ab},findKey:function(aa){var ab=this.$h;for(var ac in ab){if(E.areEqual(ab[ac],aa)){return ac}}return null},findValue:function(aa){return this.find(aa)},quit:function(){this._iterator.quit();return this},each:function(ab,aa){var ac=aa||this;this._iterator=E.iterator(this.toObject());this._iterator.each(ab,ac);return this},isEmpty:function(){return this._count<1},contains:function(aa){if(!E.exists(aa)||E.isNullOrEmpty(aa)||E.hash(aa).isEmpty()){return false}var ac=E.exists(aa.toObject)?aa:E.hash(aa),ab=true;ac.each(function(ae){if(!E.exists(ae)){ab=false;ac.quit()}else{var ad=ae.key;ab=this.containsKey(ad)&&E.areEqual(this.findValue(ad),ae.value);if(!ab){ac.quit()}}},this);return ab},containsKey:function(aa){if(!E.exists(aa)){return false}return !E.isUndefined(this.$h[aa])},containsValue:function(ab){var aa=E.obj.values(this.$h),ac=aa.length;while(ac--){if(E.areEqual(ab,aa[ac])){return true}}return false},merge:function(aa){return P(this,aa,"merge")},meld:function(aa){return P(this,aa,"meld")},filter:function(){var aa=[this.$h].concat(Array.prototype.slice.call(arguments));return E.hash(E.obj.filter.apply(E.obj,aa))},remove:function(aa){if(!this.containsKey(aa)){return this}var ab=this.$h;ab[aa]="value";delete ab[aa];this._count--;return this},replicate:function(){return E.hash(E.replicate(this.$h))},toObject:function(){return this.$h},update:function(ab,aa){if((!(E.isString(ab)||E.isNumber(ab)))||/(^null$)|(^undefined$)/.test(ab)){throw E.ku4exception("$.hash",E.str.format("Invalid key: {0}. Must be number or string.",ab))}if(E.isUndefined(aa)){return this}if(!this.containsKey(ab)){this._count++}this.$h[ab]=aa;return this}};E.Class.extend(Q,E.Class);function P(ac,ab,aa){var ad=(E.exists(ab)&&E.exists(ab.toObject))?ab.toObject():ab;ac.$h=E.obj[aa](ad,ac.$h);ac._count=E.obj.count(ac.$h);return ac}E.hash=function(aa){return new Q(aa)};E.hash.Class=Q;function y(ab){y.base.call(this);this._keys=[];this._hash=E.hash();this._count=this._keys.length;if(!E.exists(ab)){return}var ad=0,aa=ab.length;while(ad<aa){var ac=ab[ad];if(!E.isUndefined(ac)){this.add(ac)}ad++}}y.prototype={count:function(){return this.get("count")},add:function(ab){var aa=this._keys,ac=E.uid();aa[aa.length]=ac;this._hash.add(ac,ab);this._count=this._keys.length;return this},clear:function(){this._hash.clear();this._keys=[];this._count=this._keys.length;return this},contains:function(aa){return this._hash.containsValue(aa)},find:function(ab){var aa=this._keys;return(E.exists(aa[ab]))?this._hash.find(aa[ab]):null},quit:function(){this._iterator.quit();return this},each:function(ab,aa){var ac=aa||this;this._iterator=E.iterator(this.toArray());this._iterator.each(ab,ac);return this},isEmpty:function(){return this._count<1},remove:function(ac){var ab=this._hash;if(!this.contains(ac)){return this}var aa=ab.findKey(ac);this._keys.splice(aa,1);ab.remove(aa);this._count=ab.count();return this},toArray:function(){var aa=[];this._hash.each(function(ab){aa.push(ab.value)});return aa}};E.Class.extend(y,E.Class);E.list=function(aa){return new y(aa)};E.list.Class=y;E.list.parseArguments=function(aa){return new y(Array.prototype.slice.call(aa))};function U(ab,ac,aa){U.base.call(this);if((ac<1)||(ac>12)){throw E.ku4exception("$.dayPoint",E.str.format("Invalid month= {0}",ac))}if((aa<1)||(aa>Y(ac,ab))){throw E.ku4exception("$.dayPoint",E.str.format("Invalid date= {0}",aa))}this._value=(arguments.length>=3)?new Date(ab,ac-1,aa):new Date();this._day=this._value.getDay();this._date=aa;this._month=ac;this._year=ab}U.prototype={value:function(){return this._value},day:function(){return this._day},date:function(){return this._date},month:function(){return this._month},year:function(){return this._year},shortYear:function(){var aa=this._year.toString();return parseInt(aa.substr(aa.length-2))},isWeekday:function(){var aa=this._day;return aa>0&&aa<6},isWeekend:function(){return !this.isWeekday()},isLeapYear:function(){return w(this._year)},nextDay:function(){return Z(this,1,0,0)},prevDay:function(){return Z(this,-1,0,0)},nextMonth:function(){return Z(this,0,1,0)},prevMonth:function(){return Z(this,0,-1,0)},nextYear:function(){return Z(this,0,0,1)},prevYear:function(){return Z(this,0,0,-1)},add:function(af,aa,aj){function ai(al,ap,ao){var am=al,an=ap;while(an--){am=am[ao]()}return am}var ak=Math.abs,ah=ak(af),ag=ak(aj),ac=ak(aa),ab=af<0?"prevYear":"nextYear",ae=aj<0?"prevDay":"nextDay",ad=aa<0?"prevMonth":"nextMonth";return ai(ai(ai(this,ah,ab),ac,ad),ag,ae)},firstDayOfMonth:function(){return new U(this._year,this._month,1)},lastDayOfMonth:function(){return new U(this._year,this._month,Y(this._month,this._year))},isBefore:function(aa){return !(this.isAfter(aa)||this.equals(aa))},isAfter:function(ab){var aa=this._year,ad=ab.year(),ac=this._month,ae=ab.month();if(aa>ad){return true}if((aa==ad)&&(ac>ae)){return true}return((aa==ad)&&(ac==ae)&&(this._date>ab.date()))},equals:function(aa){return(this._year==aa.year())&&(this._month==aa.month())&&(this._date==aa.date())},toString:function(){return this.toStringWithFormat("mm/dd/yyyy")},toStringWithFormat:function(ad){var ag=(/y{3,}/i.test(ad))?this._year:this.shortYear(),aa=this._month,af=this._date,ac="{0}",ab=(/m{2}/i.test(ad)&&aa<10)?"0{1}":"{1}",ae=(/d{2}/i.test(ad)&&af<10)?"0{2}":"{2}";f=ad.replace(/y{1,}/gi,ac).replace(/m{1,}/gi,ab).replace(/d{1,}/gi,ae);return E.str.format(f,ag,aa,af)},toDate:function(){return this.value()},toJson:function(){return this.value().toJSON()}};E.Class.extend(U,E.Class);E.dayPoint=function(ae,af,ac,aa,ad,ag,ab){if(!(E.isDate(ae)||(E.isNumber(ae)&&E.isNumber(af)&&E.isNumber(ac)))){return null}return new U(ae,af,ac,aa,ad,ag,ab)};E.dayPoint.Class=U;E.dayPoint.canParse=function(aa){return E.exists(this.tryParse(aa))};E.dayPoint.parse=function(ad){if(ad instanceof U){return ad}var aa=(E.isString(ad))?E.str.trim(ad).replace(/T\d{2}:\d{2}:\d{2}.\d{1,}Z/,""):ad;if(/^\d{4}\-\d{1,2}\-\d{1,2}$/.test(aa)){var ab=aa.split("-"),ac=ab[0];ab.push(ac);ab.shift();aa=ab.join("/")}var ae=new Date(aa);if(!E.exists(aa)||isNaN(ae.valueOf())){throw E.ku4exception("$.dayPoint",E.str.format("Cannot parse value= {0}",aa))}return E.dayPoint(ae.getFullYear(),ae.getMonth()+1,ae.getDate())};E.dayPoint.tryParse=function(aa){try{return E.dayPoint.parse(aa)}catch(ab){return null}};var O;E.dayPoint.assumeNow=function(aa){O=E.dayPoint.parse(aa)};E.dayPoint.today=function(){return O||E.dayPoint.parse(new Date())};function Y(ab,aa){if(ab==2){return(w(aa))?29:28}return(((ab<8)&&(E.isEven(ab)))||((ab>7)&&(E.isOdd(ab))))?30:31}function w(aa){var ac=aa.toString().split(/\B/),ab=parseFloat(E.str.build(ac[ac.length-2],ac[ac.length-1]));return(ab%4==0)}function Z(ag,al,ac,an){var ap=ag.month(),ah=ag.year(),ae=ag.date(),aa=Y(ap,ah),ao=al,af=ac,ak=an,ab=ae+ao,aj=ap+af,am=ah+ak;if((ae+ao)>aa){ab=1;aj=(ap+(af+1))}if((ae+ao)<1){var ad=ag.prevMonth(),ab=Y(ad.month(),ad.year());(aj=ap+(af-1))}if((aj)>12){aj=1;am=(ah+(ak+1))}if((aj)<1){aj=12;am=(ah+(ak-1))}var ai=Y(aj,am);ab=(ab>ai)?ai:ab;return new U(am,aj,ab)}function M(ac,ab){if(!E.exists(ac)||isNaN(ac)){throw E.ku4exception("$.money",E.str.format("Invalid amount= {0}. Amount must be a number.",ac))}M.base.call(this);var aa=E.math.roundTowardZero(ac);this._cents=ac-aa;this._dollars=aa;this._currency=ab||"$";this._value=ac}M.prototype={value:function(){return this._value},dollars:function(){return this._dollars},cents:function(){return this._cents},currency:function(){return this._currency},add:function(aa){B(this,aa);return new M(this._value+aa.value(),this._currency)},divide:function(aa){if(!E.isNumber(aa)){throw E.ku4exception("$.money",E.str.format("Invalid divisor value= {0}",aa))}return new M(this._value/aa,this._currency)},equals:function(aa){return(this.isOfCurrency(aa))&&(this._value==aa.value())},exchange:function(ab,aa){return new M(this.multiply(ab).value(),aa)},isOfCurrency:function(aa){return this._currency==aa.currency()},isGreaterThan:function(aa){B(this,aa);return this._value>aa.value()},isLessThan:function(aa){B(this,aa);return this._value<aa.value()},multiply:function(aa){if(!E.isNumber(aa)){throw E.ku4exception("$.money",E.str.format("Invalid multiplier value= {0}",aa))}return new M(this._value*aa,this._currency)},nearestDollar:function(){return new M(E.math.round(this.value(),0),this._currency)},round:function(){return new M(E.math.round(this.value(),-2),this._currency)},roundDown:function(){return new M(E.math.roundDown(this.value(),-2),this._currency)},roundUp:function(){return new M(E.math.roundUp(this.value(),-2),this._currency)},subtract:function(aa){B(this,aa);return new M(this._value-aa.value(),this._currency)},toString:function(ad,ah){var ac=this.round(),af=(ac.isLessThan(E.money.zero(this.currency())))?"({0}{1}{2}{3})":"{0}{1}{2}{3}",ae=ad||",",ag=ah||".",ab=s(ac.dollars(),ae),aa=I(ac.cents());return E.str.format(af,this._currency,ab,ag,aa)}};E.Class.extend(M,E.Class);E.money=function(ab,aa){return new M(ab,aa)};E.money.Class=M;E.money.zero=function(aa){return E.money(0,aa)};E.money.isMoney=function(aa){return aa instanceof M};E.money.canParse=function(aa){try{E.money.parse(aa);return true}catch(ab){return false}};E.money.parse=function(af){if(E.isNumber(af)){return E.money(af)}if(/\,\d{2}$/.test(af)){var ag=af.split(","),ae=ag.pop(),aa=ag.join().replace(/\./g,",");af=aa+"."+ae}var ah=/(\(.*\))|(\-)/.test(af),ad=(ah)?1:0,aj=af.match(/[^\d\.\,\-]/g)||[],ac=E.exists(aj[ad])?aj[ad]:"$",ab=parseFloat(af.replace(/[^\d\.]/g,"")),ai=(ah)?-ab:ab;return E.money(ai,ac)};E.money.tryParse=function(aa){return E.money.canParse(aa)?E.money.parse(aa):null};function B(ab,aa){if(!ab.isOfCurrency(aa)){throw E.ku4exception("$.money",E.str.format("Invalid operation on non-conforming currencies. currency: {0} != currency: {1}",ab._currency,aa._currency))}}function s(aa,ae){if(E.isZero(aa)){return"0"}var af=aa.toString(),ad=af.replace(/[^\d]/,"").split(/\B/).reverse(),ag=ae||",",ac=E.list(),ab=0;E.list(ad).each(function(ah){if(ab!=0&&(ab%3==0)){ac.add(ag);ab=0}ac.add(ah);ab++});return E.str.build.apply(this,ac.toArray().reverse()).replace(/[^\d]$/,"")}function I(ab){var aa=Math.abs(E.math.round(ab,-2)),ac=aa.toString().replace(/[^\d]|0\./g,"");if(E.isZero(aa)){return"00"}if(aa<0.1){return("0"+ac).slice(-2)}if(/^\d$/.test(ac)){return(ac+"0").slice(0,2)}return ac}function v(aa,ab){if(!E.isNumber(aa)||!E.isNumber(ab)){throw E.ku4exception("$.coord",E.str.format("Invalid arguments x= {0}, y= {1} ",aa,ab))}v.base.call(this);this.x(aa).y(ab)}v.prototype={x:function(aa){return this.property("x",aa)},y:function(aa){return this.property("y",aa)},abs:function(){return new v(Math.abs(this._x),Math.abs(this._y))},add:function(ab){var aa=this._x+ab.x(),ac=this._y+ab.y();return new v(aa,ac)},divide:function(ab){var aa=this._x/ab.x(),ac=this._y/ab.y();return new v(aa,ac)},equals:function(aa){return(this._x===aa.x())&&(this._y===aa.y())},multiply:function(ab){var aa=this._x*ab.x(),ac=this._y*ab.y();return new v(aa,ac)},subtract:function(ab){var aa=this._x-ab.x(),ac=this._y-ab.y();return new v(aa,ac)},round:function(aa){var ab=aa||0;return new v(E.math.round(this.x(),ab),E.math.round(this.y(),ab))},half:function(){return this.divide(new v(2,2))},value:function(){return{x:this._x,y:this._y}},toEm:function(){return H(this,"em")},toPixel:function(){return H(this,"px")},toString:function(){return E.str.format("({0},{1})",this._x,this._y)}};E.Class.extend(v,E.Class);E.coord=function(aa,ab){return new v(aa,ab)};E.coord.Class=v;E.coord.isInstance=function(aa){return aa instanceof v};function H(ab,aa){return{x:function(){return ab.x()+aa},y:function(){return ab.y()+aa}}}function K(aa){try{if(E.isArray(aa)){return !(isNaN(aa[0])||isNaN(aa[1]))}if(E.isObjectLiteral(aa)){if(("x" in aa)&&("y" in aa)){return !(isNaN(aa.x)||isNaN(aa.y))}if(("left" in aa)&&("top" in aa)){return !(isNaN(aa.left)||isNaN(aa.top))}if(("width" in aa)&&("height" in aa)){return !(isNaN(aa.width)||isNaN(aa.height))}}return E.coord.isInstance(aa)}catch(ab){return false}}function j(aa){if(!E.exists(aa)){return null}if(E.coord.isInstance(aa)){return aa}if(E.isArray(aa)){return new v(aa[0],aa[1])}if(E.isObjectLiteral(aa)){if(E.exists(aa.left)&&E.exists(aa.top)){return new v(aa.left,aa.top)}if(E.exists(aa.width)&&E.exists(aa.height)){return new v(aa.width,aa.height)}if(E.exists(aa.x)&&E.exists(aa.y)){return new v(aa.x,aa.y)}}return null}E.coord.zero=function(){return new v(0,0)};E.coord.random=function(ac,ab){var aa=ac*Math.random(),ad=ab*Math.random(ab);return new v(aa,ad)};E.coord.canParse=K;E.coord.parse=j;E.coord.tryParse=function(aa){return K(aa)?j(aa):null};function G(aa,ab){G.base.call(this,aa,ab)}G.prototype={isAbove:function(aa){return this.y()<aa.y()},isBelow:function(aa){return this.y()>aa.y()},isLeftOf:function(aa){return this.x()<aa.x()},isRightOf:function(aa){return this.x()>aa.x()},distanceFrom:function(aa){return E.vector(this.x()-aa.x(),this.y()-aa.y())},distanceTo:function(aa){return this.distanceFrom(aa).invert()}};E.Class.extend(G,E.coord.Class);E.point=function(aa,ab){return new G(aa,ab)};E.point.Class=G;E.point.isInstance=function(aa){return aa instanceof G};E.point.zero=function(){return new G(0,0)};E.point.canParse=C;E.point.parse=a;E.point.tryParse=function(aa){return C(aa)?a(aa):null};function C(aa){try{return E.point.isInstance(G)||E.coord.canParse(aa)}catch(ab){return false}}function a(aa){if(E.point.isInstance(aa)){return aa}var ab=E.coord.parse(aa);return new G(ab.x(),ab.y())}function X(aa,ab){X.base.call(this);this._topLeft=E.point.parse(aa);this._dims=E.coord.parse(ab);this._bottomRight=E.point.parse(this._topLeft.add(this._dims))}X.prototype={dims:function(){return this.get("dims")},topLeft:function(){return this.get("topLeft")},bottomRight:function(){return this.get("bottomRight")},center:function(){return this._topLeft.add(this._bottomRight.subtract(this._topLeft)).half()},contains:function(ac){var ab=this._topLeft,aa=this._bottomRight;return ab.isAbove(ac)&&ab.isLeftOf(ac)&&aa.isRightOf(ac)&&aa.isBelow(ac)},aspectToFit:function(ab){var ag=this.dims(),af=ab.dims(),ac=ag.x(),aa=ag.y(),ae=af.x(),ad=af.y();if(ac>aa&&!E.isZero(ac)){aa*=ae/ac;ac=ae;if(aa>ad){aa=ad;ac*=aa/ag.y()}}else{if(aa>ad){ac*=ad/aa;aa=ad}}return E.rectangle(this.topLeft(),E.coord(ac,aa))}};E.Class.extend(X,E.Class);E.rectangle=function(aa,ab){return new X(aa,ab)};E.rectangle.Class=X;function b(aa,ab){if(!E.isNumber(aa)||!E.isNumber(ab)){throw E.ku4exception("$.vector",E.str.format("Invalid arguments x= {0}, y= {1} ",aa,ab))}b.base.call(this,aa,ab);this._lengthSquared=d(this,aa,ab);this._length=t(this,this._lengthSquared);this._unitNormalX=J(this,aa);this._unitNormalY=J(this,ab)}b.prototype={magnitude:function(){return this.get("length")},equals:function(aa){return(aa instanceof b)&&((this._x===aa.x())&&(this._y===aa.y()))},normal:function(){return E.vector(this._unitNormalX,this._unitNormalY)},invert:function(){return E.vector(this.x()*-1,this.y()*-1)},norm:function(){return E.vector(Math.abs(this.x()),Math.abs(this.y()))},perpendicular:function(){return E.vector(this.y()*-1,this.x())},isZero:function(){return this.x()==0&&this.y()==0},add:function(aa){return E.vector(this.x()+aa.x(),this.y()+aa.y())},dot:function(aa){return(this.x()*aa.x())+(this.y()*aa.y())},perpendicularAtTo:function(aa){var ab=aa.add(this.projectionOfOnto(aa).invert());return E.vector(ab.x(),ab.y())},projectionOfOnto:function(aa){var ab=aa.normal().scale(this.dot(aa.normal()));return E.vector(ab.x(),ab.y())},scale:function(aa){return E.vector((this.x()*aa),(this.y()*aa))},unitNormalDot:function(aa){return(this.normal().x()*aa.normal().x())+(this.normal().y()*aa.normal().y())},reflect:function(aa){if(aa.isZero()){return this}var ab=aa.normal();return this.add(ab.scale(2*(ab.dot(this))).invert())},round:function(aa){var ab=aa||0;return E.vector(E.math.round(this.x(),ab),E.math.round(this.y(),ab))}};E.Class.extend(b,E.coord.Class);E.vector=function(aa,ab){return new b(aa,ab)};E.vector.Class=b;E.vector.zero=function(){return E.vector(0,0)};E.vector.random=function(ac,ab){var aa=ac*Math.random(),ad=ab*Math.random();return E.vector(aa,ad)};function t(aa,ab){if(aa.isZero()){return 0}return Math.sqrt(ab)}function d(ab,aa,ac){if(ab.isZero()){return 0}return Math.pow(aa,2)+Math.pow(ac,2)}function J(ab,aa){if(ab.isZero()){return 0}return aa/ab.magnitude()}function u(aa,ab){if(!E.isNumber(aa)||!E.isNumber(ab)){throw E.ku4exception("$.fraction",E.str.format("Invalid arguments numerator= {0}, denominator= {1} ",aa,ab))}this._numerator=aa;this._denominator=ab}u.prototype={numerator:function(){return this._numerator},denominator:function(){return this._denominator},value:function(){return this._numerator/this._denominator},equals:function(aa){return this.value()==aa.value()},add:function(aa){var ae=this.commonDenominator(aa),ac=this.withDenominator(ae),ab=aa.withDenominator(ae),ad=ac.numerator()+ab.numerator();return new u(ad,ae)},subtract:function(aa){var ae=this.commonDenominator(aa),ac=this.withDenominator(ae),ab=aa.withDenominator(ae),ad=ac.numerator()-ab.numerator();return new u(ad,ae)},multiply:function(aa){var ab=this._numerator*aa.numerator(),ac=this._denominator*aa.denominator();return new u(ab,ac)},divide:function(aa){return this.multiply(aa.reciprocal())},reciprocal:function(){return new u(this._denominator,this._numerator)},commonDenominator:function(aa){return this._denominator*aa.denominator()},withDenominator:function(ab){var aa=(ab/this._denominator)*this._numerator;return new u(aa,ab)},simplify:function(){var aa=E.math.gcd(this._denominator,this._numerator);return new u(this._numerator/aa,this._denominator/aa)},toString:function(){return this._numerator+"/"+this._denominator}};E.fraction=function(aa,ab){return new u(aa,ab)};E.fraction.isInstance=function(aa){return aa instanceof u};E.abstractContext=function(aa){E.abstractContext.base.call(this);this.state(aa)};E.abstractContext.prototype={state:function(aa){if(!E.exists(aa)){return this._state}return this.set("state",aa.context(this))}};E.Class.extend(E.abstractContext,E.Class);E.abstractState=function(aa){E.abstractState.base.call(this);this.states(aa)};E.abstractState.prototype={context:function(aa){return this.property("context",aa)},states:function(aa){return this.set("states",aa)},state:function(aa){var ab=this._context;ab.state(new this._states[aa](ab));return this}};E.Class.extend(E.abstractState,E.Class);E.abstractVisitor=function(){};E.abstractVisitor.prototype={$visit:function(){throw new Error("visit method is abstract an must be defined.")},subject:function(aa){return this.property("subject",E.replicate(aa))},visit:function(){return this.$visit()}};function x(aa){x.base.call(this);this.$current=0;this._quit=false;this.subject(aa)}x.prototype={$hasNext:function(){return E.exists(this._subject[this.$current+1])},$hasPrev:function(){return E.exists(this._subject[this.$current-1])},$each:function(ab,ac){var aa=ac||this;this.reset();do{ab.call(aa,this.current())}while(this.next()&&(!this._quit));this._end=false;this.reset()},$exec:function(ac){var aa=this._subject,ab=aa[ac];if(!E.exists(ab)){return null}this.$current=ac;return ab},subject:function(ab){var aa=(E.isArray(ab))?ab:(E.isObject(ab))?k(ab):ab;if(!E.isUndefined(ab)){this.reset()}this.$subject=aa;return this.property("subject",aa)},current:function(){return this.$exec(this.$current)},next:function(){return this.$exec(this.$current+1)},prev:function(){return this.$exec(this.$current-1)},hasNext:function(){return this.$hasNext()},hasPrev:function(){return this.$hasPrev()},reset:function(){this.$current=0;return this},quit:function(){return this.set("quit",true)},each:function(aa,ab){if(this._subject.length<1){return this}this.$each(aa,ab);return this}};function k(aa){var ab=[];for(n in aa){ab.push({key:n,value:aa[n]})}return ab}E.Class.extend(x,E.Class);E.iterator=function(aa){return new x(aa)};E.iterator.Class=x;function D(aa){D.base.call(this);this._name=aa||E.uid();this._observers=E.hash();this._throwErrors=0}D.prototype={throwErrors:function(){this._throwErrors=2;return this},logErrors:function(){this._throwErrors=1;return this},catchErrors:function(){this._throwErrors=0;return this},isEmpty:function(){return this._observers.isEmpty()},count:function(){return this._observers.count()},activeSubscriptionKeys:function(){return this._observers.keys()},subscribe:function(aa,ae,ab,ad){var ac=this._observers;if(E.isNullOrEmpty(aa)){throw E.ku4exception("$.mediator","subscribe name must be a valid, non-empty string value.")}if(!E.isFunction(ae)){throw E.ku4exception("$.mediator","subscribe method must be a valid function.")}ae.__ku4mediator_name__=this._name;if(ac.containsKey(aa)){ac.find(aa).add(ae,ab,ad)}else{ac.add(aa,E.observer(aa).add(ae,ab,ad))}return this},unsubscribe:function(ab,ad){var ac=this._observers;if(E.isNullOrEmpty(ab)&&E.exists(ad)){ac.each(function(ae){ae.value.remove(ad)})}else{if(ac.containsKey(ab)){var aa=ac.find(ab);if(E.exists(ad)){aa.remove(ad)}else{aa.clear()}}}return this},notify:function(){var ab=Array.prototype.slice.call(arguments),aa=ab.shift();if(E.exists(aa)&&!E.isString(aa)){throw new Error("Invalid first argument at mediator.notify: "+aa)}var ac=(E.isNullOrEmpty(aa))?null:aa.replace(/\s/g,"").split(","),ad=E.list(ac);return(ad.isEmpty())?this._notifyAll(ab):this._notify(ab,ad)},clear:function(){this._observers.each(function(aa){aa.value.clear()}).clear();return this},_notifyAll:function(aa){E.list(this._observers.values()).each(function(ab){ab.notify.apply(ab,aa)});return this},_notify:function(ad,ac){var ae=this._observers,ab=this._throwErrors,aa=this._name;ac.each(function(ag){try{var af=ae.find(ag);if(!E.exists(af)){return}af.notify.apply(af,ad)}catch(aj){var ai="This exception may be thrown for various reasons. BE SURE TO CHECK FOR:\n\n1) INFINITE LOOPS: Occur due to inadvertent unfiltered calls to notify. Check calls to notify for inadvertent missing or misspelled filters.\n\n2) SUBSCRIBER EXCEPTIONS: Occur due to exceptions thrown in a subscriber. Check subscriber methods for uncaught exceptions.\n\n*NOTE: For more information see the documentation at https://github.com/kodmunki/ku4js-kernel#mediator",ah=E.ku4exception("$.mediator",E.str.format("{0}. \nMediator name = {1}\nSubscriber name = {2}\n\n {3}\n",aj.message,aa,ag,ai));if(ab==2){throw ah}if(ab==1){E.ku4Log(ah.message)}}});return this}};E.Class.extend(D,E.Class);E.mediator=function(aa){return new D(aa)};E.mediator.Class=D;function F(aa){F.base.call(this);this._name=aa||E.uid();this._methods=new E.hash()}F.prototype={add:function(ae,ab,ad){var aa=ad||E.uid(),ac=ab||this;ae.__ku4observer_name__=this._name;ae.__ku4observer_method_id__=aa;this._methods.add(aa,{m:ae,s:ac});return this},remove:function(aa){this._methods.remove(aa);return this},clear:function(){this._methods.clear();return this},notify:function(){var ac=new E.iterator(this._methods.values()),ab=arguments,aa=this._name;ac.each(function(ad){var af=ad.m;if(!E.exists(af)){throw E.ku4exception("$.observer",E.str.format("Attempt to call invalid or undefined method @ observer: {0}.\n",aa))}else{try{af.apply(ad.s,ab)}catch(ae){throw E.ku4exception("$.observer",E.str.format("Error in subscribed method @ observer: {0} methodId: {1}.\nmessage:{2}\n\n",aa,af.__ku4observer_method_id__,ae.message))}}});return this},isEmpty:function(){return this._methods.isEmpty()}};E.Class.extend(F,E.Class);E.observer=function(aa){return new F(aa)};E.observer.Class=F;function l(){this._q=[]}l.prototype={isEmpty:function(){return this._q.length==0},enqueue:function(aa){var ab=this._q;ab[ab.length]=aa;return this},dequeue:function(){var ab=this._q,aa=ab[0];ab.splice(0,1);return aa},clear:function(){this._q=[]}};E.fifo=function(){return new l()};E.fifo.Class=l;function N(aa){N.base.call(this,aa)}N.prototype={$hasNext:function(){var ac=this.$subject,aa=ac.length-1,ae=this.$current,ad=ae+1,ab=(ad>aa)?0:ad;return E.exists(ac[ab])},$hasPrev:function(){var ac=this.$subject,aa=ac.length-1,ae=this.$current,ad=ae+1,ab=(ad<0)?aa:ad;return E.exists(ac[ab])},$each:function(ab,ac){var aa=ac||this;this.reset();do{ab.call(ac,this.current())}while(this.next()&&(this.$current>0));this.reset()},$exec:function(ac){var ab=this.$subject,aa=(ab.length-1);this.$current=(ac>aa)?0:((ac<0)?aa:ac);return ab[this.$current]}};E.Class.extend(N,E.iterator.Class);E.rolodex=function(aa){return new N(aa)};E.rolodex.Class=N;function W(){}W.prototype={$isSatisfiedBy:function(aa){},isSatisfiedBy:function(aa){return this.$isSatisfiedBy(aa)},and:function(aa){return new L(this,aa)},or:function(aa){return new m(this,aa)},xor:function(aa){return new A(this,aa)},not:function(){return new T(this)}};function L(ab,aa){L.base.call(this);this.$1=ab;this.$2=aa}L.prototype.$isSatisfiedBy=function(aa){return this.$1.isSatisfiedBy(aa)&&this.$2.isSatisfiedBy(aa)};E.Class.extend(L,W);function m(ab,aa){m.base.call(this);this.$1=ab;this.$2=aa}m.prototype.$isSatisfiedBy=function(aa){return this.$1.isSatisfiedBy(aa)||this.$2.isSatisfiedBy(aa)};E.Class.extend(m,W);function A(ab,aa){A.base.call(this);this.$1=ab;this.$2=aa}A.prototype.$isSatisfiedBy=function(aa){return E.xor(this.$1.isSatisfiedBy(aa),this.$2.isSatisfiedBy(aa))};E.Class.extend(A,W);function o(){o.base.call(this)}o.prototype.$isSatisfiedBy=function(aa){return true};E.Class.extend(o,W);function i(){i.base.call(this)}i.prototype.$isSatisfiedBy=function(aa){return false};E.Class.extend(i,W);function T(aa){T.base.call(this);this._s=aa}T.prototype.$isSatisfiedBy=function(aa){return !this._s.isSatisfiedBy(aa)};E.Class.extend(T,W);function q(aa){q.base.call(this);this.$isSatisfiedBy=aa}E.Class.extend(q,W);E.spec=function(aa){return new q(aa)};function z(){this._q=[]}z.prototype={isEmpty:function(){return this._q.length==0},push:function(aa){var ab=this._q;ab[ab.length]=aa;return this},pop:function(){return this._q.pop()},clear:function(){this._q=[]}};E.lifo=function(){return new z()};E.lifo.Class=z;function R(aa){this._func=aa;this._testNotRun="Test not run. Call within() to run test."}R.prototype={mark0:function(){return this._mark0||NaN},mark1:function(){return this._mark1||NaN},time:function(){return this._time||NaN},note:function(){return this._note||this._testNotRun},within:function(aa){var ad=c();this._func();var ab=c();this._mark0=ad;this._mark1=ab;this._time=ab-ad;var ac=this._time;this._note=r(ac,aa);return ac<=aa}};function c(){return(E.exists(performance))?performance.now():(new Date()).valueOf()}function r(ab,aa){return(ab<=aa)?"Pass":E.str.format("Performance Fail - Expected: {0} but was: {1}",aa,ab)}E.ku4performance=function(aa){return new R(aa)}})(ku4js);